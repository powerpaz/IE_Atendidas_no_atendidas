<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Visor Geográfico Nacional - Sistema de Equipamiento Educativo</title>
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" crossorigin="anonymous"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" crossorigin="anonymous"/>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css"/>
  
  <!-- JavaScript Libraries -->
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>
  <script defer src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js" crossorigin="anonymous"></script>
  
  <!-- Application Scripts -->
  <script defer src="config.js"></script>
  <script defer src="app.js"></script>
</head>
<body>

  <!-- ===== Encabezado institucional ===== -->
  <header class="brand-bar" style="
      position:sticky;top:0;z-index:10000;
      display:flex;align-items:center;justify-content:space-between;
      background:#fff;padding:10px 18px;
      border-bottom:3px solid #1DB954;">
    <div style="display:flex;align-items:center;gap:12px;">
      <img src="logo.png" alt="Ministerio de Educación, Deporte y Cultura" style="height:52px;max-width:100%;object-fit:contain;">
    </div>
    <h1 style="margin:0;font:600 20px/1.2 'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#0b3a6f;text-align:center;flex:1;">
      Geovisor de Equipamiento Educativo – MINEDEC - Dirección de Educación Inicial y Básica
    </h1>
    <div style="width:52px;"></div>
  </header>
  <!-- ===== Fin encabezado institucional ===== -->

  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <!-- Panel Capas (encendido / apagado) -->
      <div class="panel">
        <div class="panel-header">
          <h2 class="panel-title">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <path d="M7 7h10M7 12h10M7 17h10"></path>
            </svg>
            Capas (GeoJSON)
          </h2>
          <div class="status-container">
            <span class="status" id="status">Inicializando…</span>
          </div>
        </div>
        <div class="panel-content">
          <div id="layersPanel" class="filters">
            <div class="filter-group" style="margin-bottom:10px;">
              <label style="font-weight:600;">Polígonos base</label>
              <div class="toggle-row"><input type="checkbox" id="tgProv" checked> <label for="tgProv">Provincias</label></div>
              <div class="toggle-row"><input type="checkbox" id="tgNbi" checked> <label for="tgNbi">Cantones con NBI &gt; 50%</label></div>
            </div>

            <div class="filter-group" style="margin-bottom:10px;">
              <label style="font-weight:600;">Puntos</label>
              <div class="toggle-row"><input type="checkbox" id="tgViol" checked> <label for="tgViol">Total Casos de Violencia (burbujas)</label></div>
              <div class="toggle-row"><input type="checkbox" id="tgOtras" checked> <label for="tgOtras">Total Estudiantes Otras Nacionalidades (burbujas)</label></div>
              <div class="toggle-row"><input type="checkbox" id="tgIENo" checked> <label for="tgIENo">IE Fiscales No atendidas</label></div>
              <div class="toggle-row"><input type="checkbox" id="tgServ" checked> <label for="tgServ">Servicios de Agua y Luz</label></div>
            </div>

            <div class="data-source">
              <span class="source-label">Fuente:</span> GeoJSON cargados localmente
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Área principal del mapa -->
    <main class="main-content">
      <header class="map-header">
        <div class="header-content">
          <h1 class="map-title">Mapa de priorización</h1>
          <p class="map-subtitle">Violencia y estudiantes de otras nacionalidades (capas GeoJSON)</p>
        </div>
        <div class="legend"></div>
      </header>
      <div id="map" class="map-container"></div>
    </main>
  </div>

  <!-- ===== Nuevo footer institucional ===== -->
  <footer class="footer" style="background:#f9fafb;border-top:3px solid #1DB954;text-align:center;padding:10px 0;font-family:'Inter',sans-serif;font-size:13px;color:#555;margin-top:auto;">
    <span>© DEIB – MINEDEC | Datos: DEIB/ Elaborado por la DPI</span>
  </footer>

</body>
</html>
